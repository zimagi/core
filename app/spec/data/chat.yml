data:
  chat:
    base: id_resource
    disable_ops: [update]
    roles:
      edit: [chat-user]
      view: [chat-user]
    packages: []
    key: id
    id_fields: [name, user_id]
    fields:
      user:
        type: '@django.ForeignKey'
        relation: user
        options:
          'null': true
          on_delete: '@django.PROTECT'
      label:
        type: '@django.CharField'
        options:
          'null': true
          max_length: 256
    meta:
      ordering: [user, name, '-created']
      dynamic_fields: [message_render]

  chat_message:
    app: chat
    base: id_resource
    disable_ops: [update]
    roles:
      edit: []
      view: [chat-user]
    packages: []
    key: id
    id_fields: [chat_id, created]
    fields:
      name: null
      chat:
        type: '@django.ForeignKey'
        relation: chat
        options:
          on_delete: '@django.CASCADE'
          related_name: messages
      role:
        type: '@django.CharField'
        options:
          default: user
          max_length: 32
      sender:
        type: '@django.CharField'
        options:
          'null': true
          max_length: 256
      content:
        type: '@django.TextField'
        options:
          default: ""
    meta:
      ordering: [chat_id, '-created']
